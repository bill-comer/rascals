DROP TABLE NOTES cascade constraints;
DROP TABLE CUSTOMER cascade constraints;
DROP TABLE AGENT_HISTORY cascade constraints;
DROP TABLE AGENT cascade constraints;
DROP TABLE MPAN cascade constraints;


CREATE TABLE AGENT (
       AGENT_PK NUMERIC(36) NOT NULL
     , MPAN_LNK NUMERIC(36) NOT NULL
     , J0092 TIMESTAMP
     , J0094 TIMESTAMP
     , J0163 VARCHAR(1)
     , J0178 VARCHAR(4)
     , J0183 VARCHAR(4)
     , J0205 VARCHAR(4)
     , J0210 TIMESTAMP
     , J0218 VARCHAR(1)
     , J0219 TIMESTAMP
     , J0334 TIMESTAMP
     , J0340 TIMESTAMP
     , J0360 TIMESTAMP
     , J0399 TIMESTAMP
     , J0459 VARCHAR(1)
     , J0675 VARCHAR(1)
     , J0926 VARCHAR(4)
     , J0927 VARCHAR(4)
     , J0048_DA VARCHAR(10)
     , J0274_DA VARCHAR(4)
     , J0275_DA VARCHAR(4)
     , J0279_DA VARCHAR(2)
     , J0048_DC VARCHAR(10)
     , J0274_DC VARCHAR(4)
     , J0275_DC VARCHAR(4)
     , J0279_DC VARCHAR(2)
     , J0048_MO VARCHAR(10)
     , J0274_MO VARCHAR(4)
     , J0275_MO VARCHAR(4)
     , J0279_MO VARCHAR(2)
     , J0093 TIMESTAMP
     , LAST_UPD TIMESTAMP DEFAULT SYSDATE NOT NULL
     , J0459_DA VARCHAR(1) DEFAULT 'E' NOT NULL
     , J0459_DC VARCHAR(1) DEFAULT 'E' NOT NULL
     , J0459_MO VARCHAR(1) DEFAULT 'E' NOT NULL
     , J1016_DA CHAR(1)
     , J1016_DC CHAR(1)
     , J1016_MO CHAR(1));


CREATE TABLE AGENT_HISTORY (
       AGENT_HISTORY_PK NUMERIC(38) NOT NULL
     , MPAN_LNK NUMERIC(38) NOT NULL
     , AGENT_ID CHAR(4) NOT NULL
     , AGENT_ROLE_CODE CHAR(1) NOT NULL
     , AGENT_EFD TIMESTAMP NOT NULL
     , AGENT_ETD TIMESTAMP NOT NULL
     , REASON_FOR_CHANGE VARCHAR(4) NOT NULL
     , LAST_UPD TIMESTAMP DEFAULT SYSDATE NOT NULL
);


CREATE TABLE MPAN (
       UNIQ_ID NUMERIC(36) NOT NULL
     , J0003 VARCHAR(13) NOT NULL
     , DISTRIBUTOR VARCHAR(4)
     , J0031 VARCHAR(10)
     , J0049 TIMESTAMP
     , J0066 VARCHAR(2)
     , J0071 NUMERIC(11) DEFAULT 0
     , J0076 VARCHAR(4)
     , J0080 VARCHAR(1)
     , J0081 VARCHAR(16)
     , J0082 VARCHAR(1)
     , J0084 VARCHAR(4)
     , J0117 TIMESTAMP
     , J0147 NUMERIC(11) DEFAULT 0
     , J0215 VARCHAR(1)
     , J0263 VARCHAR(10)
     , J0297 TIMESTAMP
     , J0300 TIMESTAMP
     , J0301 TIMESTAMP
     , J0306 TIMESTAMP
     , J0307 TIMESTAMP
     , J0308 TIMESTAMP
     , J0473 TIMESTAMP
     , J0658 TIMESTAMP
     , J0923 VARCHAR(4)
     , J0924 TIMESTAMP
     , J0925 TIMESTAMP
     , J0928 TIMESTAMP
     , J1036 VARCHAR(40)
     , J1037 VARCHAR(40)
     , J1038 VARCHAR(40)
     , J1039 VARCHAR(40)
     , J1040 VARCHAR(40)
     , J1041 VARCHAR(40)
     , J1042 VARCHAR(40)
     , J1043 VARCHAR(40)
     , J1044 VARCHAR(40)
     , J1194 VARCHAR(4)
     , J1628 VARCHAR(11)
     , J1647 TIMESTAMP
     , J0090 TIMESTAMP
     , J0220 NUMERIC(11)
     , J0757 VARCHAR(10)
     , SUPPLIER_ID VARCHAR(4)
     , J0821 TIMESTAMP
     , IBT_LNK NUMERIC(36) DEFAULT 0
     , J0093 TIMESTAMP
     , LAST_UPD TIMESTAMP DEFAULT SYSDATE NOT NULL
     , X0210 VARCHAR(2)
     , X0211 VARCHAR(15)
     , X0213 CHAR(3) DEFAULT '000' NOT NULL
     , J1687 VARCHAR(1)
     , J1689 VARCHAR(1)
     , X0214 VARCHAR(1) DEFAULT 'F'
     , X0219 VARCHAR(1) DEFAULT 'F'
);


CREATE TABLE CUSTOMER (
       CUSTOMER_PK NUMERIC(36) NOT NULL
     , MPAN_LNK NUMERIC(36) NOT NULL
     , CUST_ETD TIMESTAMP
     , J0375 VARCHAR(100)
     , J0489 VARCHAR(50)
     , J0490 VARCHAR(14)
     , J0491 VARCHAR(14)
     , J0692 VARCHAR(40)
     , J0693 VARCHAR(10)
     , J0694 TIMESTAMP
     , J0846 TIMESTAMP
     , J0851 VARCHAR(50)
     , J0852 VARCHAR(14)
     , J1011 NUMERIC(11)
     , J1046 VARCHAR(40)
     , J1047 VARCHAR(40)
     , J1048 VARCHAR(40)
     , J1049 VARCHAR(40)
     , J1050 VARCHAR(40)
     , J1051 VARCHAR(40)
     , J1052 VARCHAR(40)
     , J1053 VARCHAR(40)
     , J1054 VARCHAR(40)
     , X0004 VARCHAR(1)
     , X0005 VARCHAR(200)
     , X0002 VARCHAR(1)
     , X0003 VARCHAR(1)
     , X0007 VARCHAR(1)
     , X0016 VARCHAR(2)
     , X0017 VARCHAR(20)
     , ALT_X0016 VARCHAR(2)
     , J0566 VARCHAR(10)
     , J1674 VARCHAR(1)
     , LAST_UPD TIMESTAMP DEFAULT SYSDATE NOT NULL
);


CREATE TABLE NOTES (
       NOTE_PK NUMERIC(36) NOT NULL
     , MPAN_LNK NUMERIC(36) DEFAULT 0
     , CUSTOMER_LNK NUMERIC(36) DEFAULT 0
     , NOTES VARCHAR(1000)
     , DATE_ TIMESTAMP
     , LAST_UPD TIMESTAMP DEFAULT SYSDATE NOT NULL
     , CREATED_BY VARCHAR(50)
     , SUMMARY VARCHAR(50)
);

CREATE TABLE METER (
  METER_PK NUMERIC(36) NOT NULL,
  MPAN_LNK NUMERIC(36) NOT NULL,
  LAST_UPD TIMESTAMP DEFAULT SYSDATE NOT NULL,
  J0004 VARCHAR(10) NULL,
  J0428 VARCHAR(20) NULL,
  J1254 TIMESTAMP DEFAULT SYSDATE NULL,
  ETD_MSID TIMESTAMP DEFAULT SYSDATE NULL,
  J0483 VARCHAR(5) NULL
);

CREATE TABLE METER_REGISTER (
  METER_REG_PK NUMERIC(36) NOT NULL,
  LAST_UPD TIMESTAMP DEFAULT SYSDATE NOT NULL,
  METER_FK NUMERIC(36) NOT NULL,
  EFD_ID TIMESTAMP DEFAULT SYSDATE NOT NULL,
  ETD_ID TIMESTAMP DEFAULT SYSDATE NOT NULL,
  J0010 VARCHAR(1000) NULL,
  J0103 VARCHAR(100) NULL,
  J0474 VARCHAR(10) NULL,
);

CREATE METER_REG_READING (
  MET_REG_READ NUMERIC(36) NOT NULL,
  LAST_UPD TIMESTAMP DEFAULT SYSDATE NOT NULL,
  METER_REG_FK NUMERIC(36) NOT NULL,
  J0016 TIMESTAMP DEFAULT SYSDATE NOT NULL,
  DATE_RECEIVED TIMESTAMP DEFAULT SYSDATE NOT NULL,
  J0040 FLOAT NULL,
  FLOW_RECEIVED VARCHAR(100) NULL
);

CREATE AREGI_PROCESS (
  AR_PROC_PK NUMERIC(36) NOT NULL,
  LAST_UPD TIMESTAMP DEFAULT SYSDATE NOT NULL,
  MPAN_LNK NUMERIC(36) NOT NULL,
  D0268_RECEIVED TIMESTAMP DEFAULT SYSDATE NULL,
  D0268_DUP_RECEIVED TIMESTAMP DEFAULT SYSDATE NULL,
  D0150_RECEIVED TIMESTAMP DEFAULT SYSDATE NULL
);

ALTER TABLE AGENT
  ADD CONSTRAINT SYS_C0019226
      PRIMARY KEY (AGENT_PK);


ALTER TABLE AGENT_HISTORY
  ADD CONSTRAINT SYS_C0019234
      PRIMARY KEY (AGENT_HISTORY_PK);


ALTER TABLE MPAN
  ADD CONSTRAINT PK_UNIQ_ID
      PRIMARY KEY (UNIQ_ID);


ALTER TABLE CUSTOMER
  ADD CONSTRAINT SYS_C0019263
      PRIMARY KEY (CUSTOMER_PK);


ALTER TABLE NOTES
  ADD CONSTRAINT SYS_C0019380
      PRIMARY KEY (NOTE_PK);


ALTER TABLE CUSTOMER
  ADD CONSTRAINT FK_CUSTOMER_MPAN
      FOREIGN KEY (MPAN_LNK)
      REFERENCES MPAN (UNIQ_ID)
   ON DELETE CASCADE;


ALTER TABLE NOTES
  ADD CONSTRAINT CUSTOMERNOTES
      FOREIGN KEY (CUSTOMER_LNK)
      REFERENCES CUSTOMER (CUSTOMER_PK)
   ON DELETE CASCADE;

ALTER TABLE AREGI_PROCESS
  ADD CONSTRAINT SYS_C0019234
      PRIMARY KEY (AGENT_HISTORY_PK);

create sequence SEQ_PARMS_AFMS_FK;